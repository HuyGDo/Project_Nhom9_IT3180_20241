<div class="users-list">
    <h1>All Users</h1>

    <div class="users-grid">
        {{#each users}}
        <div class="user-card">
            <img
                src="{{#if this.profile_picture}}{{
                    this.profile_picture
                }}{{else}}/assets/img/default-avatar.png{{/if}}"
                alt="{{ this.first_name }}'s avatar"
                class="user-avatar"
            />
            <div class="user-info">
                <h3>{{ this.first_name }} {{ this.last_name }}</h3>
                <p>@{{ this.username }}</p>
                <a href="/users/{{ this._id }}" class="btn btn--secondary">View Profile</a>

                {{#if this.isFollowing}}
                <form action="/users/{{ this._id }}/unfollow" method="POST">
                    <button type="submit" class="btn btn--primary">Unfollow</button>
                </form>
                {{else}}
                <form action="/users/{{ this._id }}/follow" method="POST">
                    <button type="submit" class="btn btn--primary">Follow</button>
                </form>
                {{/if}}
            </div>
        </div>
        {{/each}}
    </div>
</div>
