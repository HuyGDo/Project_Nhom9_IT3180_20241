<main class="create-recipe">
    <div class="create-recipe__container">
        <h1 class="create-recipe__heading">Create New Recipe</h1>

        <form action="/recipes/store" method="POST" class="create-recipe__form">
            {{!-- Basic Info --}}
            <div class="form-group">
                <h2 class="section-title">Basic Information</h2>
                <div class="form-group">
                    <label for="title">Recipe Title</label>
                    <input
                        type="text"
                        id="title"
                        name="title"
                        placeholder="Enter your recipe title"
                        required
                    />
                </div>
                <div class="form-group">
                    <label for="description">Recipe Description</label>
                    <textarea
                        id="description"
                        name="description"
                        placeholder="Describe your recipe..."
                        required
                    ></textarea>
                </div>
            </div>

            {{!-- Cooking Info --}}
            <div class="form-group">
                <h2 class="section-title">Cooking Information</h2>
                <div class="create-recipe__form__item--row">
                    <div class="form-group">
                        <label for="prepTime">Prep Time</label>
                        <input
                            type="number"
                            id="prepTime"
                            name="prepTime"
                            placeholder="Minutes"
                            min="0"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label for="cookTime">Cook Time</label>
                        <input
                            type="number"
                            id="cookTime"
                            name="cookTime"
                            placeholder="Minutes"
                            min="0"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label for="servings">Servings</label>
                        <input
                            type="number"
                            id="servings"
                            name="servings"
                            placeholder="Number of servings"
                            min="1"
                            required
                        />
                    </div>
                </div>
            </div>

            {{!-- Ingredients --}}
            <div class="form-group">
                <h2 class="section-title">Ingredients</h2>
                <div class="ingredients-list" id="ingredientsList">
                    <div class="ingredient-item">
                        <input
                            type="text"
                            name="ingredients[0][name]"
                            placeholder="Ingredient name"
                            required
                        />
                        <input
                            type="text"
                            name="ingredients[0][quantity]"
                            placeholder="Amount (e.g., 2 cups)"
                            required
                        />
                        <button type="button" class="remove-btn">&times;</button>
                    </div>
                </div>
                <button type="button" class="add-btn" id="addIngredient">
                    Add Another Ingredient
                </button>
            </div>

            {{!-- Instructions --}}
            <div class="form-group">
                <h2 class="section-title">Cooking Instructions</h2>
                <div class="instructions-list" id="instructionsList">
                    <div class="instruction-item">
                        <input
                            type="text"
                            name="instructions[0][description]"
                            placeholder="Step 1: Enter cooking instruction"
                            required
                        />
                        <button type="button" class="remove-btn">&times;</button>
                    </div>
                </div>
                <button type="button" class="add-btn" id="addInstruction">Add Another Step</button>
            </div>

            <button type="submit" class="btn--submit">Create Recipe</button>
        </form>
    </div>
</main>

<script>
    // Add dynamic fields for ingredients
    const ingredientsList = document.getElementById("ingredientsList");
    const addIngredientBtn = document.getElementById("addIngredient");
    let ingredientCount = 1;

    addIngredientBtn.addEventListener("click", () => {
        const newIngredient = document.createElement("div");
        newIngredient.className = "ingredient-item";
        newIngredient.innerHTML = `
            <input 
                type="text" 
                name="ingredients[${ingredientCount}][name]" 
                placeholder="Ingredient name"
                required
            >
            <input 
                type="text" 
                name="ingredients[${ingredientCount}][quantity]" 
                placeholder="Amount (e.g., 2 cups)"
                required
            >
            <button type="button" class="remove-btn">&times;</button>
        `;
        ingredientsList.appendChild(newIngredient);
        ingredientCount++;
    });

    // Add dynamic fields for instructions
    const instructionsList = document.getElementById("instructionsList");
    const addInstructionBtn = document.getElementById("addInstruction");
    let instructionCount = 1;

    addInstructionBtn.addEventListener("click", () => {
        const newInstruction = document.createElement("div");
        newInstruction.className = "instruction-item";
        newInstruction.innerHTML = `
            <input 
                type="text" 
                name="instructions[${instructionCount}][description]" 
                placeholder="Step ${instructionCount + 1}: Enter cooking instruction"
                required
            >
            <button type="button" class="remove-btn">&times;</button>
        `;
        instructionsList.appendChild(newInstruction);
        instructionCount++;
    });

    // Remove items
    document.addEventListener("click", (e) => {
        if (e.target.classList.contains("remove-btn")) {
            e.target.parentElement.remove();
        }
    });
</script>
